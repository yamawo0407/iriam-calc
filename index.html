<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IRIAMランクシミュレーター</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: #f0f2f5; padding: 20px; }
        .card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 500px; margin: 0 auto; }
        h1 { color: #ff4500; font-size: 1.2rem; text-align: center; }
        .input-group { margin-bottom: 15px; }
        label { font-size: 0.8rem; color: #666; display: block; margin-bottom: 5px; }
        select, input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #ff4500; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .results { margin-top: 20px; overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
        th, td { border-bottom: 1px solid #eee; padding: 8px; text-align: center; }
        .up { color: red; font-weight: bold; }
        .down { color: blue; }
    </style>
</head>
<body>
    <div class="card">
        <h1>IRIAMシミュレーター</h1>
        <div class="input-group">
            <label>現在のランク</label>
            <select id="rank">
                <option value="D">D</option><option value="C1">C1</option><option value="C2">C2</option>
                <option value="C3">C3</option><option value="C4">C4</option><option value="C5">C5</option>
                <option value="B1">B1</option><option value="B2">B2</option><option value="B3">B3</option>
                <option value="A1">A1</option><option value="A2">A2</option><option value="A3">A3</option>
                <option value="S1">S1</option><option value="S2">S2</option><option value="S3">S3</option>
            </select>
        </div>
        <div class="input-group">
            <label>残り日数（6〜0）</label>
            <input type="number" id="days" value="6" min="0" max="6">
        </div>
        <div class="input-group">
            <label>毎日の獲得スコア</label>
            <input type="number" id="score" value="2">
        </div>
        <button onclick="calculate()">計算する</button>

        <div class="results">
            <table id="res-table">
                <thead><tr><th>日</th><th>ランク</th><th>残り</th><th>スコア</th><th>判定</th></tr></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <script>
        const RANKS = ["D", "C1", "C2", "C3", "C4", "C5", "B1", "B2", "B3", "A1", "A2", "A3", "S1", "S2", "S3"];
        function calculate() {
            let curRank = document.getElementById('rank').value;
            let dayRem = parseInt(document.getElementById('days').value);
            let dailyScore = parseInt(document.getElementById('score').value);
            const tbody = document.querySelector("#res-table tbody");
            tbody.innerHTML = "";
            let total = 0;

            for (let i = 1; i <= 14; i++) {
                let status = "";
                let displayDay = dayRem;
                let isEnd = false;

                total += dailyScore;

                if (total >= 18) {
                    status = "アップ";
                    isEnd = true;
                } else if (dayRem <= 0) {
                    status = (total >= 12) ? "キープ" : "ダウン";
                    isEnd = true;
                } else {
                    dayRem--;
                }

                let tr = `<tr><td>${i}日後</td><td>${curRank}</td><td>${displayDay}日</td><td>${total}</td><td class="${status === 'アップ' ? 'up' : (status === 'ダウン' ? 'down' : '')}">${status}</td></tr>`;
                tbody.innerHTML += tr;

                if (isEnd) {
                    let idx = RANKS.indexOf(curRank);
                    if (status === "アップ" && idx < RANKS.length - 1) curRank = RANKS[idx + 1];
                    else if (status === "ダウン" && idx > 0) curRank = RANKS[idx - 1];
                    total = 0;
                    dayRem = 6;
                }
            }
        }
    </script>
</body>
</html>
